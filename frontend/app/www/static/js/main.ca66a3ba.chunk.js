(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){e.exports=n(155)},154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),c=n(51),s=n(101),l=n(49),u=n(56),m=n(57),d=n(102),g=n.n(d),p="auth_token",f=function(){function e(){Object(u.a)(this,e),this.api=void 0,this.api=g.a.create({baseURL:"https://192.168.1.3:5001/api",headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem(p)),e})}return Object(m.a)(e,[{key:"Login",value:function(e){return this.api.post("account/login",e).then(function(e){if(200===e.status)return e.data.token;throw e.status})}},{key:"AddItem",value:function(e){return this.api.post("items",e).then(function(e){if(200!==e.status)throw e.status})}},{key:"GetItems",value:function(){return this.api.get("items").then(function(e){if(200===e.status)return e.data;throw e.status})}},{key:"GetToken",value:function(){return localStorage.getItem(p)}},{key:"SaveToken",value:function(e){localStorage.setItem(p,e)}},{key:"RemoveToken",value:function(){localStorage.removeItem(p)}},{key:"GetUserInfo",value:function(){return this.api.get("account/me").then(function(e){if(200===e.status)return e.data;throw e.status})}},{key:"GetCategories",value:function(){return this.api.get("categories").then(function(e){if(200===e.status)return e.data;throw e.status})}},{key:"GetStatistics",value:function(){return this.api.get("statistics").then(function(e){if(200===e.status)return e.data;throw e.status})}}]),e}(),E=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"buildInstance",value:function(){this.instance=new f}},{key:"Instance",get:function(){return this.instance||this.buildInstance(),this.instance}}]),e}();E.instance=void 0;var h="TOKEN_VALIDATE_SUCCESS",v="TOKEN_VALIDATE_ERROR",b="USER_INFO_SUCCESS";function y(e){return{type:v,error:e}}function S(){return function(e){var t=E.Instance.GetToken();t?E.Instance.GetUserInfo().then(function(n){e({type:h,token:t}),e({type:b,userInfo:n})}).catch(function(t){e(y(t))}):e(y(void 0))}}function O(e,t){switch(t.type){case h:return E.Instance.SaveToken(t.token),Object(l.a)({},e.user,{isLoggedIn:!0,error:void 0});case v:return Object(l.a)({},e.user,{isLoggedIn:!1,error:t.error,userInfo:void 0});case b:return Object(l.a)({},e.user,{userInfo:t.userInfo})}return e.user}var w="LIST_LOAD_START",I="LIST_LOAD_SUCCESS";function j(){return function(e){e({type:w}),E.Instance.GetItems().then(function(t){e({type:I,list:t})})}}function N(e,t){switch(t.type){case w:return"loading";case I:return t.list}return e.list}var T="ADD_NEW",k="ADD_NEW_START",C="ADD_NEW_SUCCESS";function A(e){return function(t){t({type:k}),E.Instance.AddItem({Name:e.name,Cost:e.cost,Type:e.type,CategoryId:e.categoryId}).then(function(){t({type:C})})}}function x(e,t){switch(t.type){case T:return;case k:return"loading";case C:return!0}return e.addNew}var L="LOAD_CATEGORIES",D="LOAD_CATEGORIES_SUCCESS";function _(){return function(e){e({type:L}),E.Instance.GetCategories().then(function(t){e(function(e){return{type:D,categories:e}}(t))})}}function R(e,t){switch(t.type){case L:return"loading";case D:return t.categories}return e.categories}var B="STATISTICS_LOAD_START",W="STATISTICS_LOAD_SUCCESS";function G(){return function(e){e({type:B}),E.Instance.GetStatistics().then(function(t){e(function(e){return{type:W,statistics:e}}(t))})}}function U(e,t){switch(t.type){case B:return"loading";case W:return t.statistics}return e.statistics}var F=n(20),P=n(19),z=n(30),q=n(37);var H,J=n(190),M=n(104),X=n.n(M),V=n(188),K=n(72),$=n(208),Q=X()(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},login:{display:"flex",justifyContent:"center",flexDirection:"column"},paper:{},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},title:{textAlign:"center"}}}),Y=Object(F.b)(null,function(e){return{login:function(t,n){e(function(e,t){return function(n){E.Instance.Login({UserName:e,Password:t}).then(function(e){E.Instance.SaveToken(e),n(S())}).catch(function(){n(y())})}}(t,n))}}})(function(e){var t=e.login,n=Q(),i=Object(a.useState)(""),o=Object(P.a)(i,2),c=o[0],s=o[1],l=Object(a.useState)(""),u=Object(P.a)(l,2),m=u[0],d=u[1];return r.a.createElement(V.a,{component:"main",maxWidth:"xs",className:n.login},r.a.createElement("div",{className:n.paper},r.a.createElement(K.a,{variant:"h3",className:n.title},"P\xe9nzk\xf6vet\u0151 2.0"),r.a.createElement("form",{className:n.form,onSubmit:function(e){t(c,m),e.preventDefault()}},r.a.createElement($.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:c,onChange:function(e){return s(e.target.value)}}),r.a.createElement($.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:m,onChange:function(e){return d(e.target.value)}}),r.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit},"Sign In"))))}),Z=n(158),ee=Object(Z.a)(function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}}),te=Object(F.b)(function(e){return{userName:e.user.userInfo&&e.user.userInfo.userName}})(function(e){var t=e.userName,n=ee();return r.a.createElement(V.a,{maxWidth:"lg",className:n.container},r.a.createElement(K.a,{variant:"h1"},"Hello ",t,"!"))}),ne=n(206),ae=n(43),re=n(160),ie=n(210),oe=n(191),ce=n(192),se=n(189),le=n(159),ue=n(193),me=n(194),de=n(3),ge=n(105),pe=n.n(ge),fe=n(68),Ee=n.n(fe),he=n(107),ve=n.n(he),be=n(108),ye=n.n(be),Se=n(109),Oe=n.n(Se),we=Object(re.a)(function(e){return{drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ae.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),toolbarIcon:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),list:{textDecoration:"none"}}}),Ie=function(e){var t=e.isOpen,n=e.onToggle,a=we();return r.a.createElement(ie.a,{variant:"permanent",classes:{paper:Object(de.a)(a.drawerPaper,!t&&a.drawerPaperClose)},open:t},r.a.createElement("div",{className:a.toolbarIcon},r.a.createElement(oe.a,{onClick:function(){return n()}},r.a.createElement(pe.a,null))),r.a.createElement(ce.a,null),r.a.createElement(se.a,{className:a.list},r.a.createElement(le.a,{button:!0,component:z.b,to:"/"},r.a.createElement(ue.a,null,r.a.createElement(ve.a,null)),r.a.createElement(me.a,{primary:"Home"})),r.a.createElement(le.a,{button:!0,component:z.b,to:"/add-new"},r.a.createElement(ue.a,null,r.a.createElement(Ee.a,null)),r.a.createElement(me.a,{primary:"Record"})),r.a.createElement(le.a,{button:!0,component:z.b,to:"/list"},r.a.createElement(ue.a,null,r.a.createElement(ye.a,null)),r.a.createElement(me.a,{primary:"List"})),r.a.createElement(le.a,{button:!0,component:z.b,to:"/statistics"},r.a.createElement(ue.a,null,r.a.createElement(Oe.a,null)),r.a.createElement(me.a,{primary:"Statistics"}))))},je=n(195),Ne=n(196),Te=n(110),ke=n.n(Te),Ce=n(111),Ae=n.n(Ce),xe=Object(re.a)(function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},toolbar:{paddingRight:24},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},filler:{flex:1}}}),Le=function(e){var t=e.isOpen,n=e.onToggle,a=e.onLogout,i=xe();return r.a.createElement(je.a,{position:"absolute",className:Object(de.a)(i.appBar,t&&i.appBarShift)},r.a.createElement(Ne.a,{className:i.toolbar},r.a.createElement(oe.a,{edge:"start",color:"inherit","aria-label":"Open drawer",onClick:function(){return n()},className:Object(de.a)(i.menuButton,t&&i.menuButtonHidden)},r.a.createElement(ke.a,null)),r.a.createElement(K.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0},"P\xe9nzk\xf6vet\u0151 2.0"),r.a.createElement("div",{className:i.filler}),r.a.createElement(oe.a,{onClick:function(){return a()},"aria-label":"Sign off",title:"Sign off"},r.a.createElement(Ae.a,null))))},De=n(157),_e=n(198),Re=n(114),Be=n(197),We=Object(Z.a)(function(e){return{container:{position:"relative"},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},chip:{margin:e.spacing(.5,.25)}}}),Ge=function(e){var t=We();return r.a.createElement(Re.a,{onChange:function(t){return e.onSelect(t)},itemToString:function(e){return e?e.label:""}},function(n){var a=n.getItemProps,i=n.getInputProps,o=n.isOpen,c=n.openMenu,s=n.inputValue;return r.a.createElement("div",{className:t.container},r.a.createElement($.a,Object.assign({label:"Category",fullWidth:!0},i(),{onFocus:function(){return c()},onClick:function(){return c()}})),o?r.a.createElement(De.a,{className:t.paper,square:!0},e.getSuggestions(s).map(function(e,t){return r.a.createElement(Be.a,a({key:e.key,index:t,item:e}),e.label)})):null)})};!function(e){e[e.Spending=0]="Spending",e[e.Income=1]="Income"}(H||(H={}));var Ue=Object(Z.a)(function(e){return{paper:Object(ae.a)({margin:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)})}}),Fe=function(e){var t=e.addNew,n=e.categories,i=Ue(),o=Object(a.useState)(""),c=Object(P.a)(o,2),s=c[0],l=c[1],u=Object(a.useState)(""),m=Object(P.a)(u,2),d=m[0],g=m[1],p=Object(a.useState)(),f=Object(P.a)(p,2),E=f[0],h=f[1];return r.a.createElement(De.a,{className:i.paper},r.a.createElement(K.a,{component:"h1",variant:"h4"},"Record"),r.a.createElement(_e.a,{container:!0,spacing:3},r.a.createElement(_e.a,{item:!0,xs:12,sm:6},r.a.createElement($.a,{required:!0,id:"name",name:"name",label:"Description",fullWidth:!0,value:s,onChange:function(e){l(e.target.value)}})),r.a.createElement(_e.a,{item:!0,xs:12,sm:6},r.a.createElement($.a,{required:!0,type:"number",id:"cost",name:"cost",label:"Cost",fullWidth:!0,value:d,onChange:function(e){g(e.target.value)}})),r.a.createElement(_e.a,{item:!0,xs:12,sm:6},r.a.createElement(Ge,{getSuggestions:function(e){return(n||[]).map(function(e){return{label:e.name,key:e.id}})},onSelect:function(e){h(e.key)}})),r.a.createElement(_e.a,{item:!0,xs:12},r.a.createElement(J.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e={name:s,cost:Number(d),type:H.Spending,categoryId:E};t(e)}()}},"Record"))))},Pe=Object(q.e)(Object(F.b)(function(e){return{addNewState:e.addNew,categories:e.categories}},function(e){return{init:function(){e({type:T}),e(_())},onAddNew:function(t){e(A(t))}}})(function(e){var t=e.init,n=e.addNewState,i=e.onAddNew,o=e.categories,c=e.history,s=Object(a.useState)(!1),l=Object(P.a)(s,2),u=l[0],m=l[1];Object(a.useEffect)(function(){if(!u)return t(),void m(!0);!0===n&&c.push("/list")},[u,n,t,c]);var d="loading"===o||void 0===o?[]:o;return r.a.createElement(Fe,{addNew:i,categories:d})})),ze=n(204),qe=n(205),He=n(199),Je=n(200),Me=n(201),Xe=n(202),Ve=n(203),Ke=["January","February","March","April","May","June","July","August","September","October","November","December"],$e=function(e){var t=e.date,n=new Date(t),a="".concat(Ke[n.getMonth()+1]," ").concat(n.getDay()+1,".");return r.a.createElement(r.a.Fragment,null,a)},Qe=function(e){var t=e.time,n=new Date(t),a="".concat(n.getHours().toString().padStart(2,"0"),":").concat(n.getMinutes().toString().padStart(2,"0"));return r.a.createElement(r.a.Fragment,null,a)},Ye=function(e){var t=e.dateTime;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{date:t})," ",r.a.createElement(Qe,{time:t}))},Ze=Object(Z.a)(function(e){return{root:{marginTop:e.spacing(3),overflowX:"auto"}}}),et=function(e){var t=e.items,n=Ze();return r.a.createElement(De.a,{className:n.root},r.a.createElement(He.a,null,r.a.createElement(Je.a,null,r.a.createElement(Me.a,null,r.a.createElement(Xe.a,null,"Id"),r.a.createElement(Xe.a,null,"Type"),r.a.createElement(Xe.a,null,"Category"),r.a.createElement(Xe.a,null,"Name"),r.a.createElement(Xe.a,null,"Amount"),r.a.createElement(Xe.a,null,"Date"))),r.a.createElement(Ve.a,null,t.map(function(e){return r.a.createElement(Me.a,{key:e.id},r.a.createElement(Xe.a,{component:"th"},e.id),r.a.createElement(Xe.a,null,e.type),r.a.createElement(Xe.a,null,e.category.name),r.a.createElement(Xe.a,null,e.name),r.a.createElement(Xe.a,null,e.cost),r.a.createElement(Xe.a,null,r.a.createElement(Ye,{dateTime:e.date})))}))))},tt=n(112),nt=n.n(tt),at=Object(Z.a)(function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},margin:{margin:e.spacing(1)}}}),rt=Object(F.b)(function(e){return{items:e.list}},function(e){return{loadList:function(){e(j())}}})(function(e){var t,n=e.items,i=e.loadList,o=at(),c=Object(a.useState)(!1),s=Object(P.a)(c,2),l=s[0],u=s[1];return Object(a.useEffect)(function(){l||(u(!0),"loading"!==n&&i())},[l,n,i]),"loading"===n?t=r.a.createElement(ze.a,null):void 0!==n&&(t=r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.a,{component:z.b,to:"/add-new",color:"primary",size:"small",variant:"extended"},r.a.createElement(Ee.a,null)," ADD"),r.a.createElement(qe.a,{color:"secondary",size:"small",variant:"extended",className:o.margin,onClick:function(){i()}},r.a.createElement(nt.a,null)," RELOAD"),r.a.createElement(et,{items:n}))),r.a.createElement(V.a,{maxWidth:"lg",className:o.container},r.a.createElement(K.a,{variant:"h3"},"Recorded items"),t)}),it=Object(Z.a)(function(e){return{root:{marginTop:e.spacing(3),overflowX:"auto"}}}),ot=function(e){var t=e.statistics,n=it();return r.a.createElement(_e.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{className:n.root},r.a.createElement(He.a,null,r.a.createElement(Je.a,null,r.a.createElement(Me.a,null,r.a.createElement(Xe.a,null,"Category"),r.a.createElement(Xe.a,{align:"right"},"Total amount"))),r.a.createElement(Ve.a,null,t.categoryStatistics.map(function(e){return r.a.createElement(Me.a,{key:e.category?e.category.id:-1},r.a.createElement(Xe.a,{component:"th"},e.category?e.category.name:"Uncategorized"),r.a.createElement(Xe.a,{align:"right"},e.totalAmount))})))))},ct=n(81),st=Object(Z.a)(function(e){return{root:{marginTop:e.spacing(3),overflowX:"auto"}}}),lt=function(e){e.statistics;var t=st();Object(a.useEffect)(function(){ct.b("#stat-chart"),ct.a()});return r.a.createElement(_e.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{className:t.root},r.a.createElement("svg",{id:"stat-chart",className:"container"})))},ut=Object(Z.a)(function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}}),mt=Object(F.b)(function(e){return{statistics:e.statistics}},function(e){return{loadStatistics:function(){e(G())}}})(function(e){var t,n=e.statistics,i=e.loadStatistics,o=ut(),c=Object(a.useState)(!1),s=Object(P.a)(c,2),l=s[0],u=s[1];return Object(a.useEffect)(function(){l||(u(!0),"loading"!==n&&i())},[l,n,i]),"loading"===n?t=r.a.createElement(ze.a,null):void 0!==n&&(t=r.a.createElement(_e.a,{container:!0,spacing:3},r.a.createElement(ot,{statistics:n}),r.a.createElement(lt,{statistics:n}))),r.a.createElement(V.a,{maxWidth:"lg",className:o.container},r.a.createElement(K.a,{variant:"h3"},"Statistics"),t)}),dt=Object(Z.a)(function(e){return{content:{flexGrow:1,height:"100vh",overflow:"auto"},appBarSpacer:e.mixins.toolbar}}),gt=Object(F.b)(function(e){return{isLoggedIn:e.user.isLoggedIn}},function(e){return{logout:function(){e(function(e){E.Instance.RemoveToken(),e(y())})}}})(function(e){var t=e.isLoggedIn,n=e.logout,i=Object(a.useState)(!1),o=Object(P.a)(i,2),c=o[0],s=o[1],l=function(){s(!c)},u=dt(),m=r.a.createElement(z.a,null,r.a.createElement(Le,{isOpen:c,onToggle:l,onLogout:n}),r.a.createElement(Ie,{isOpen:c,onToggle:l}),r.a.createElement("div",{className:u.content},r.a.createElement("div",{className:u.appBarSpacer}),r.a.createElement(q.a,{exact:!0,path:"/",component:!0===t?te:Y}),r.a.createElement(q.a,{path:"/add-new",component:Pe}),r.a.createElement(q.a,{path:"/list",component:rt}),r.a.createElement(q.a,{path:"/statistics",component:mt}))),d=r.a.createElement(r.a.Fragment,null,t?m:r.a.createElement(Y,null)),g=r.a.createElement("p",null,"Loading...");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,null),"loading"===t?g:d)}),pt=n(113),ft=n(211),Et=n(71),ht=n(207),vt=Object(c.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{isLoggedIn:"loading",error:void 0,userInfo:void 0},list:void 0,addNew:void 0,categories:void 0,statistics:void 0},t=arguments.length>1?arguments[1]:void 0;return{user:O(e,t),list:N(e,t),addNew:x(e,t),categories:R(e,t),statistics:U(e,t)}},{user:{isLoggedIn:"loading",error:void 0,userInfo:void 0},list:void 0,addNew:void 0,categories:void 0,statistics:void 0},Object(c.a)(s.a));vt.dispatch(S());var bt=Object(pt.a)({palette:{secondary:{main:Et.a[800]},primary:{main:ht.a[500]}},typography:{fontFamily:['"Lato"',"sans-serif"].join(",")}}),yt=function(){return r.a.createElement(ft.a,{theme:bt},r.a.createElement(F.a,{store:vt},r.a.createElement(gt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(154);o.a.render(r.a.createElement(yt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[116,1,2]]]);
//# sourceMappingURL=main.ca66a3ba.chunk.js.map